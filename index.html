<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pollinations AI Bot - Ø´Ø§Øª Ø¨ÙˆØª Ù…Ø¬Ø§Ù†ÙŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');
        * { font-family: 'Cairo', sans-serif; }
        .message-user { background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%); }
        .message-bot { background: rgba(30, 41, 59, 0.9); border: 1px solid #475569; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .dot { animation: bounce 1.4s infinite ease-in-out; }
        .dot:nth-child(2) { animation-delay: 0.16s; }
        .dot:nth-child(3) { animation-delay: 0.32s; }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-900 via-purple-900 to-indigo-900 min-h-screen">
    <div class="max-w-4xl mx-auto p-4 h-screen flex flex-col">
        <!-- Header -->
        <div class="bg-gradient-to-r from-pink-600 to-purple-600 rounded-t-2xl p-6 shadow-2xl">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="bg-white/20 p-3 rounded-xl backdrop-blur-sm">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-white">Pollinations AI Bot</h1>
                        <p class="text-pink-100 text-sm">Ù…Ø¬Ø§Ù†ÙŠ 100% ğŸŒ¸ - Ø§Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù ÙˆØ§Ø³ØªØ®Ø¯Ù…Ù‡ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ</p>
                    </div>
                </div>
                <button onclick="clearChat()" class="bg-white/20 hover:bg-white/30 p-3 rounded-xl transition-all backdrop-blur-sm">
                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Messages -->
        <div id="messages" class="flex-1 bg-slate-900/50 backdrop-blur-xl overflow-y-auto p-6 space-y-4">
            <div class="flex justify-start">
                <div class="message-bot max-w-[80%] rounded-2xl p-4 shadow-lg text-white">
                    <p class="text-sm leading-relaxed">Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ø´Ø§Øª Ø¨ÙˆØª Ù…Ø¯Ø¹ÙˆÙ… Ø¨Ù€ <strong>Pollinations AI</strong> Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ ğŸŒ¸</p>
                    <p class="text-sm mt-2">ÙŠÙ…ÙƒÙ†Ù†ÙŠ:</p>
                    <ul class="text-sm mt-1 space-y-1">
                        <li>âœ¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„ØªÙƒ</li>
                        <li>ğŸ’» ÙƒØªØ§Ø¨Ø© Ø£ÙƒÙˆØ§Ø¯ Ø¨Ø±Ù…Ø¬ÙŠØ©</li>
                        <li>ğŸ§® Ø­Ù„ Ù…Ø³Ø§Ø¦Ù„ Ø±ÙŠØ§Ø¶ÙŠØ©</li>
                        <li>ğŸ¨ ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ± Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</li>
                    </ul>
                    <p class="text-sm mt-2">Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ Ø£Ù† ØªÙØ¹Ù„ØŸ</p>
                </div>
            </div>
        </div>

        <!-- Quick Prompts -->
        <div class="bg-slate-900/50 backdrop-blur-xl px-6 py-3 flex gap-2 overflow-x-auto">
            <button onclick="setInput('Ø§ÙƒØªØ¨ ÙƒÙˆØ¯ Python Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£ÙˆÙ„ÙŠØ©')" class="bg-blue-500 hover:opacity-80 text-white px-4 py-2 rounded-xl text-sm whitespace-nowrap transition-all shadow-lg">
                ğŸ’» ÙƒÙˆØ¯ Python
            </button>
            <button onclick="setInput('Ø§Ø´Ø±Ø­ Ù„ÙŠ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø³Ø±ÙŠØ¹')" class="bg-purple-500 hover:opacity-80 text-white px-4 py-2 rounded-xl text-sm whitespace-nowrap transition-all shadow-lg">
                âœ¨ Ø´Ø±Ø­ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ©
            </button>
            <button onclick="setInput('Ø§Ø±Ø³Ù… Ù„ÙŠ ØµÙˆØ±Ø© ØºØ±ÙˆØ¨ Ø´Ù…Ø³ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø­Ø±')" class="bg-pink-500 hover:opacity-80 text-white px-4 py-2 rounded-xl text-sm whitespace-nowrap transition-all shadow-lg">
                ğŸ¨ ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø©
            </button>
        </div>

        <!-- Input -->
        <div class="bg-slate-900/50 backdrop-blur-xl rounded-b-2xl p-4 shadow-2xl">
            <div class="flex gap-3">
                <input 
                    id="userInput" 
                    type="text" 
                    placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ø£Ùˆ Ø§Ø·Ù„Ø¨ ØµÙˆØ±Ø©... Ù…Ø«Ù„: Ø§ÙƒØªØ¨ ÙƒÙˆØ¯ Python Ø£Ùˆ Ø§Ø±Ø³Ù… Ù„ÙŠ ØµÙˆØ±Ø© Ø¬Ø¨Ù„"
                    class="flex-1 bg-slate-800/90 text-white border border-slate-700 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-pink-500 placeholder-slate-400"
                    onkeypress="if(event.key==='Enter') sendMessage()"
                />
                <button onclick="sendMessage()" id="sendBtn" class="bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-700 hover:to-purple-700 text-white px-6 py-3 rounded-xl transition-all shadow-lg">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                    </svg>
                </button>
            </div>
            <p class="text-xs text-slate-400 mt-2 text-center">
                Ù…Ø¬Ø§Ù†ÙŠ ØªÙ…Ø§Ù…Ø§Ù‹ â€¢ Ø¨Ø¯ÙˆÙ† Ø­Ø¯ÙˆØ¯ â€¢ Ø§Ø­ÙØ¸ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù HTML ÙˆØ§Ø³ØªØ®Ø¯Ù…Ù‡ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ
            </p>
        </div>
    </div>

    <script>
        let conversationHistory = [];

        function addMessage(role, content, image = null) {
            const messagesDiv = document.getElementById('messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex ${role === 'user' ? 'justify-end' : 'justify-start'}`;
            
            const bubble = document.createElement('div');
            bubble.className = `${role === 'user' ? 'message-user' : 'message-bot'} max-w-[80%] rounded-2xl p-4 shadow-lg text-white`;
            
            if (image) {
                bubble.innerHTML = `
                    <p class="text-sm mb-2">${content}</p>
                    <img src="${image}" alt="Generated" class="rounded-lg w-full max-w-md mt-2" 
                         onerror="this.style.display='none'; this.parentElement.innerHTML += '<p class=text-red-300>ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©</p>'">
                `;
            } else {
                bubble.innerHTML = `<pre class="whitespace-pre-wrap font-sans text-sm leading-relaxed">${content}</pre>`;
            }
            
            messageDiv.appendChild(bubble);
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function showLoading() {
            const messagesDiv = document.getElementById('messages');
            const loadingDiv = document.createElement('div');
            loadingDiv.id = 'loading';
            loadingDiv.className = 'flex justify-start';
            loadingDiv.innerHTML = `
                <div class="message-bot rounded-2xl p-4 shadow-lg">
                    <div class="flex gap-2">
                        <div class="w-2 h-2 bg-pink-500 rounded-full dot"></div>
                        <div class="w-2 h-2 bg-purple-500 rounded-full dot"></div>
                        <div class="w-2 h-2 bg-indigo-500 rounded-full dot"></div>
                    </div>
                </div>
            `;
            messagesDiv.appendChild(loadingDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function hideLoading() {
            const loading = document.getElementById('loading');
            if (loading) loading.remove();
        }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            if (!message) return;

            addMessage('user', message);
            input.value = '';
            showLoading();

            const isImageRequest = message.includes('ØµÙˆØ±Ø©') || message.includes('Ø§Ø±Ø³Ù…') || 
                                  message.includes('image') || message.includes('draw');

            try {
                if (isImageRequest) {
                    // ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø©
                    const imageUrl = `https://image.pollinations.ai/prompt/${encodeURIComponent(message)}?width=512&height=512&nologo=true`;
                    hideLoading();
                    addMessage('assistant', 'ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙˆØ±Ø©! ğŸ¨', imageUrl);
                } else {
                    // Ù…Ø­Ø§Ø¯Ø«Ø© Ù†ØµÙŠØ©
                    const systemPrompt = 'Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ ÙˆÙ…ÙÙŠØ¯. ØªØ¬ÙŠØ¨ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¨Ø´ÙƒÙ„ ÙˆØ§Ø¶Ø­ ÙˆÙ…ÙØµÙ„. ÙŠÙ…ÙƒÙ†Ùƒ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© ÙˆØ­Ù„ Ø§Ù„Ù…Ø³Ø§Ø¦Ù„ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© ÙˆØ´Ø±Ø­ Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ….';
                    
                    const context = conversationHistory.slice(-6).map(msg => 
                        `${msg.role === 'user' ? 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…' : 'Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯'}: ${msg.content}`
                    ).join('\n');
                    
                    const fullPrompt = context 
                        ? `${systemPrompt}\n\nØ§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©:\n${context}\n\nØ§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${message}\nØ§Ù„Ù…Ø³Ø§Ø¹Ø¯:`
                        : `${systemPrompt}\n\nØ§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${message}\nØ§Ù„Ù…Ø³Ø§Ø¹Ø¯:`;

                    const response = await fetch('https://text.pollinations.ai/', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            messages: [{ role: 'user', content: fullPrompt }],
                            model: 'openai',
                            seed: Math.floor(Math.random() * 1000000)
                        })
                    });

                    const text = await response.text();
                    hideLoading();
                    addMessage('assistant', text.trim() || 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… Ø£ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ø¯.');

                    conversationHistory.push({ role: 'user', content: message });
                    conversationHistory.push({ role: 'assistant', content: text.trim() });
                }
            } catch (error) {
                hideLoading();
                addMessage('assistant', 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£. ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.\n\nÙ…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ø°Ø§ Ø§Ù„Ø´Ø§Øª Ø¨ÙˆØª ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„ Ø¹Ù†Ø¯Ù…Ø§ ØªØ­ÙØ¸ Ø§Ù„Ù…Ù„Ù Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ ÙˆØªÙØªØ­Ù‡ Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­ Ù…Ø¨Ø§Ø´Ø±Ø©.');
                console.error('Error:', error);
            }
        }

        function setInput(text) {
            document.getElementById('userInput').value = text;
        }

        function clearChat() {
            const messagesDiv = document.getElementById('messages');
            messagesDiv.innerHTML = `
                <div class="flex justify-start">
                    <div class="message-bot max-w-[80%] rounded-2xl p-4 shadow-lg text-white">
                        <p class="text-sm leading-relaxed">Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ø´Ø§Øª Ø¨ÙˆØª Ù…Ø¯Ø¹ÙˆÙ… Ø¨Ù€ <strong>Pollinations AI</strong> Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ ğŸŒ¸</p>
                        <p class="text-sm mt-2">ÙŠÙ…ÙƒÙ†Ù†ÙŠ:</p>
                        <ul class="text-sm mt-1 space-y-1">
                            <li>âœ¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„ØªÙƒ</li>
                            <li>ğŸ’» ÙƒØªØ§Ø¨Ø© Ø£ÙƒÙˆØ§Ø¯ Ø¨Ø±Ù…Ø¬ÙŠØ©</li>
                            <li>ğŸ§® Ø­Ù„ Ù…Ø³Ø§Ø¦Ù„ Ø±ÙŠØ§Ø¶ÙŠØ©</li>
                            <li>ğŸ¨ ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ± Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</li>
                        </ul>
                        <p class="text-sm mt-2">Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ Ø£Ù† ØªÙØ¹Ù„ØŸ</p>
                    </div>
                </div>
            `;
            conversationHistory = [];
        }
    </script>
</body>
</html>
